{"version":3,"sources":["components/Order/SessionDetail.js","Store/order-action.js","components/Ticket/TicketOrder.js","components/Ticket/TicketOrder.module.css","components/Order/SessionDetail.module.css"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_SessionDetail_module_css__WEBPACK_IMPORTED_MODULE_1__","_SessionDetail_module_css__WEBPACK_IMPORTED_MODULE_1___default","SessionDeatil","props","movieId","img","name","date","day","Date","getDay","dateInMonth","getDate","month","getMonth","a","createElement","className","classes","sdcontanier","sdpic","src","sdinfo","sdname","time","sendOrderData","sessionId","seatArr","_ref","Object","asyncToGenerator","_regeneratorRuntime","mark","_callee2","dispatch","orderedseats","checkEach","result","orderedTickets","_iterator2","_step2","key","wrap","_context2","prev","next","_ref2","_callee","_iterator","_step","seatNo","rowIndex","seatNoIndex","seatId","data","_context","_createForOfIteratorHelper","s","done","value","charCodeAt","checkSeat","sent","selectedSeatsActions","cancelSelected","id","window","alert","uiActions","seatsReload","clearPending","push","t0","e","f","finish","abrupt","stop","apply","this","arguments","setPending","length","console","log","updateSeat","err","orderActions","orderTickets","_x","TicketOrder","_useState","useState","_useState2","slicedToArray","totalPrice","setTotalPrice","movieIndex","paymentPage","adprice","conprice","movieName","useSelector","state","selectedseats","selectedSeatsNo","adTicket","normalTicket","conTicket","concessionTicket","tickesNumber","useDispatch","navigate","useNavigate","_useHttp","useHttp","sendRequest","status","useEffect","map","seat","index","react_default","orderTicketHandler","TicketOrder_regeneratorRuntime","event","preventDefault","selectMovieSession","movieDate","movieTime","concat","cancelOrder","tkocontainer","tkoheader","tkocontent","tkotkgroup","tkotk","tkoseats","tkoseatsheader","tkoseatsicon","tkopricesummary","tkobtn","dark","onClick","module","exports"],"mappings":"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","file":"static/js/1.f4cc2cb5.chunk.js","sourcesContent":["import React from 'react';\nimport { useEffect, Fragment } from 'react';\nimport classes from './SessionDetail.module.css';\nimport LoadingSpinner from '../UI/LoadingSpinner';\nimport useHttp from '../../hooks/use-http';\nimport { getMovieDetail } from '../../lib/api';\n\n\nconst SessionDeatil = (props) =>{\n    const { movieId,img, name } =props;\n    const dayOfWeek =[\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    const months =['Jan','Feb','Mar','Apr','May','June', 'Jul','Aug','Sep','Oct','Nov','Dec']; \n    const date =  props.date;\n    \n    const day = dayOfWeek[new Date(date).getDay()];\n    const dateInMonth = new Date(date).getDate();\n    const month =months[new Date(date).getMonth()];\n    \n    \n   \n    return (\n        <div className={classes.sdcontanier}>\n              <div className={classes.sdpic}>\n                            <img src={img}></img>\n                        </div>\n                        <div className={classes.sdinfo}>\n                            <div className={classes.sdname}>{name}</div>\n                            <div>{day}  {dateInMonth}  {month}</div>\n                            <div>{props.time}</div>\n                        </div>\n           \n        </div>\n    )\n}\n\nexport default SessionDeatil;","import { selectedSeatsActions } from \"./selectedseats-slice\";\nimport { uiActions } from \"./ui-slice\";\nimport { orderActions } from \"./order-slice\";\nimport { updateSeat,checkSeat } from \"../lib/api\";\n\n\n\nexport const sendOrderData = (movieId, sessionId, seatArr) =>{\n\n    return async (dispatch ) =>{\n       \n        let orderedseats = [];\n  \n\n        const checkEach= async () => {  \n              for(const seatNo of seatArr) {                                 \n                let rowIndex = seatNo[0].charCodeAt(0) -65 ;\n                let seatNoIndex = seatNo[1] -1;\n                let seatId = (seatNoIndex +1) + (rowIndex*6);\n                let data =await checkSeat( movieId,sessionId,rowIndex,seatNoIndex, seatNo, seatId);\n                if( data == true){\n                    dispatch(selectedSeatsActions.cancelSelected({id:seatId, seatNo:seatNo}));\n                    window.alert(seatNo + \"sold out\");\n                    dispatch(uiActions.seatsReload());\n                    dispatch(uiActions.clearPending());\n                };\n                if( data == false){\n                   orderedseats.push({\n                        rowIndex,\n                        seatNoIndex,\n                        seatNo\n                   })\n                };\n\n            };\n            return orderedseats;\n        };\n        dispatch(uiActions.setPending());\n        let result =await checkEach();\n\n        if( result.length === seatArr.length){\n            console.log(result);\n            let orderedTickets=[];\n            for ( const key of result){\n                orderedTickets.push(key.seatNo);\n               \n                updateSeat(movieId, sessionId, key.rowIndex, key.seatNoIndex);\n            }\n            dispatch(orderActions.orderTickets({ orderedTickets: orderedTickets}));\n            dispatch(uiActions.clearPending());\n            return true;\n        }else{\n            orderedseats = [];\n            return false;\n        }\n\n\n        \n    };\n\n};","import { useSelector } from 'react-redux';\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport classes from './TicketOrder.module.css';\nimport useHttp from '../../hooks/use-http';\nimport LoadingSpinner from '../UI/LoadingSpinner';\nimport {  getMovieDetail,checkSeat } from '../../lib/api';\nimport { useDispatch } from 'react-redux';\nimport { selectedSeatsActions } from '../../Store/selectedseats-slice';\nimport { sendOrderData } from '../../Store/order-action';\nimport { orderActions } from '../../Store/order-slice';\n\nconst TicketOrder =(props) =>{\n    const [totalPrice, setTotalPrice]= useState(0);\n    const { sessionId, date, time, movieIndex, paymentPage, adprice, conprice, movieName } =props;\n    const seatArr = useSelector((state) => state.selectedseats.selectedSeatsNo);\n    const adTicket = useSelector((state) => state.selectedseats.normalTicket);\n    const conTicket = useSelector((state) => state.selectedseats.concessionTicket);\n    const tickesNumber = useSelector((state) => state.selectedseats.tickesNumber);\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n    const { sendRequest,status, data } = useHttp(checkSeat, true);\n    \n    useEffect(()=>{\n        setTotalPrice ((adTicket * adprice) + (conTicket * conprice));\n    },[adTicket,adprice,conTicket,conprice]);\n\n    let seatNo;\n    if(seatArr.length > 0){\n        seatNo = seatArr.map((seat,index)=> {\n                            return  <span key={index}>{seat}</span>});\n    };\n    const check = ()=>{\n        if(status == 'completed' && data == false){\n            return true\n        }\n        if(status == 'completed' && data == true){\n            return false\n        }\n    };\n\n    const orderTicketHandler= async (event) =>{\n        event.preventDefault();\n        if(seatArr.length !== tickesNumber){\n            return\n        }\n       \n        let movieId = sessionId[0]; \n       \n        dispatch(orderActions.selectMovieSession({\n            movieId:movieId,\n            movieName: movieName,\n            sessionId:sessionId,\n            movieDate:date,\n            movieTime:time,\n            adTicket:adTicket,\n            conTicket:conTicket,\n            totalPrice:totalPrice,\n        }))\n        let result = await dispatch(sendOrderData(movieId,sessionId,seatArr)) ;\n        if(result == true) {\n            navigate(`/movie-purchase?movieId=${movieIndex}&sessionId=${sessionId}&time=${time}&date=${date}`)\n        } ;\n        if(result == false){\n            dispatch(orderActions.cancelOrder());\n        }\n                 \n    };\n    \n    \n             \n\n    return(\n        <div className={classes.tkocontainer}>\n            <div className={classes.tkoheader}>Tickets</div>\n            <form className={classes.tkocontent}>\n                <table className={classes.tkotkgroup}>\n                    <tbody>\n                    <tr className={classes.tkotk}>\n                        <td>Adult</td>\n                        <td>X{adTicket}</td>\n                        <td>${adprice}</td>\n                    </tr>\n                    { conTicket> 0 && <tr className={classes.tkotk}>\n                        <td>Concession</td>\n                        <td>X{conTicket}</td>\n                        <td>${conprice}</td>\n                    </tr>}\n                    </tbody>\n                </table>\n                <div className={classes.tkoseats}>\n                    <div className={classes.tkoseatsheader}>Seats</div>\n                    <div className={classes.tkoseatsicon}>{seatNo}</div>\n                </div>\n                <div className={classes.tkopricesummary}>\n                    <div>Total Price</div>\n                    <div>${totalPrice}</div>\n                </div>\n                <div className={classes.tkobtn} >\n                    { !paymentPage && <button className={`${seatArr.length !== tickesNumber ? classes.dark : ''}`}\n                             onClick={orderTicketHandler}>CHECK OUT</button>}\n                  \n                </div>\n            </form>\n            \n\n        </div>\n    )\n}\n\nexport default TicketOrder;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tkocontainer\":\"TicketOrder_tkocontainer__2AOi0\",\"tkoheader\":\"TicketOrder_tkoheader__2kv9E\",\"tkocontent\":\"TicketOrder_tkocontent__1dp_F\",\"tkotkgroup\":\"TicketOrder_tkotkgroup__2aGIj\",\"tkotk\":\"TicketOrder_tkotk__K54iO\",\"tkoseats\":\"TicketOrder_tkoseats__GdAni\",\"tkoseatsheader\":\"TicketOrder_tkoseatsheader__1H7RV\",\"tkoseatsicon\":\"TicketOrder_tkoseatsicon__3vtGM\",\"tkopricesummary\":\"TicketOrder_tkopricesummary__2UWeG\",\"tkobtn\":\"TicketOrder_tkobtn__2eT59\",\"dark\":\"TicketOrder_dark__2WnyX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sdcontanier\":\"SessionDetail_sdcontanier__fJ6wr\",\"sdpic\":\"SessionDetail_sdpic__2s36R\",\"sdinfo\":\"SessionDetail_sdinfo__3jOLm\",\"sdname\":\"SessionDetail_sdname__27UeC\"};"],"sourceRoot":""}